{"version":3,"sources":["webpack:///./src/pages/player-sdk-android/using-plugins.mdx"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"0eAMO,IAAMA,EAAe,GAOtBC,EAAc,CAClBD,gBAEIE,EAAYC,IACH,SAASC,EAAT,GAGZ,IAFDC,EAEC,EAFDA,WACGC,E,oIACF,mBACD,OAAO,YAACJ,EAAD,KAAeD,EAAiBK,EAAhC,CAAuCD,WAAYA,EAAYE,QAAQ,cAG5E,6OACmF,0BAAYC,WAAW,KAAvB,uEADnF,+DAEuD,0BAAYA,WAAW,KAAvB,wCAFvD,gKAG6F,0BAAYA,WAAW,KAAvB,kDAH7F,8CAIsC,0BAAYA,WAAW,KAAvB,cAJtC,KAKA,uVAEW,0BAAYA,WAAW,KAAvB,0BAFX,MAEoF,0BAAYA,WAAW,KAAvB,0BAFpF,qFAGU,0BAAYA,WAAW,KAAvB,qBAHV,2DAGmI,0BAAYA,WAAW,KAAvB,wCAHnI,qBAIA,0BAAYA,WAAW,KAAvB,qBAJA,mEAIiI,0BAAYA,WAAW,KAAvB,mBAJjI,sEAMA,iDAAgC,0BAAYA,WAAW,KAAvB,qBAAhC,qBAAmH,0BAAYA,WAAW,KAAvB,iCAAnH,oNAEQ,sBAAQA,WAAW,KAAnB,sBAFR,aAGA,oCACA,gEAA+C,sBAAQA,WAAW,KAAnB,cAA/C,YAA0G,0BAAYA,WAAW,KAAvB,+BAA1G,8EACF,kBAAIA,WAAW,KAAf,+BADE,aAEA,4CACA,sBACE,kBAAIA,WAAW,MAAf,sBACA,kBAAIA,WAAW,MAAf,gEAAqF,0BAAYA,WAAW,MAAvB,kBAArF,KACA,kBAAIA,WAAW,MAAf,mDAEF,8EAA6D,0BAAYA,WAAW,KAAvB,iBAA7D,iBAAwI,0BAAYA,WAAW,KAAvB,yDAAxI,kFAC0E,0BAAYA,WAAW,KAAvB,oBAD1E,KAC4I,0BAAYA,WAAW,KAAvB,+BAD5I,YAEI,0BAAYA,WAAW,KAAvB,aAFJ,yBAEmF,kBAAIA,WAAW,KAAf,+BAFnF,gBAE2J,0BAAYA,WAAW,KAAvB,kBAF3J,sEAIA,gFACA,sBACE,kBAAIA,WAAW,MAAf,MAA2B,0BAAYA,WAAW,MAAvB,mBAA3B,UAAkG,0BAAYA,WAAW,MAAvB,mEAAlG,2DACA,kBAAIA,WAAW,MAAK,0BAAYA,WAAW,MAAvB,UAApB,oCAA4G,kBAAIA,WAAW,MAAf,OAA5G,4DAAyM,0BAAYA,WAAW,MAAvB,yCAAzM,MAEF,uCACA,yMACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,oBADZ,ySAOL,2BAAU,0BAAYA,WAAW,KAAvB,uBAAV,0DACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,0LAOL,wEAAuD,0BAAYA,WAAW,KAAvB,wBAAvD,aACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,gaAQL,8DAA6C,0BAAYA,WAAW,KAAvB,sDAA7C,wBAAoK,0BAAYA,WAAW,KAAvB,wCAApK,MACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,iBADZ,0cAeL,wDACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,4FAIL,+BAAc,0BAAYA,WAAW,KAAvB,oBAAd,mBACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,ynBAoBL,qCAAoB,kBAAIA,WAAW,KAAf,OAApB,aAAiE,0BAAYA,WAAW,KAAvB,UAAjE,YACA,uBAAK,sBAAMA,WAAW,OAAU,CAC5B,UAAa,kBADZ,oUASL,+GACA,4CACA,sBACE,kBAAIA,WAAW,MAAf,0DAA+E,0BAAYA,WAAW,MAAvB,iEAA/E,4GAEA,kBAAIA,WAAW,MAAf,wCAA6D,0BAAYA,WAAW,MAAvB,uDAC7D,kBAAIA,WAAW,MAAf,kGAMNJ,EAAWK,gBAAiB","file":"component---src-pages-player-sdk-android-using-plugins-mdx-8ce527b3bf0f90883e3c.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/travis/build/IBM/video-streaming-developer-docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <p>{`IBM Player SDK version 1.1.0 introduced a plugin system which enables you to extend the media player with additional features.\nPlugins will be provided by IBM and must be provided during player initialization in `}<inlineCode parentName=\"p\">{`UstreamPlayer.initWithContent(ContentDescriptor, MediaPlayerModule)`}</inlineCode>{`.\nThese extensions may require different player views than `}<inlineCode parentName=\"p\">{`tv.ustream.player.android.PlayerView`}</inlineCode>{`. PlayerView requirements for a plugin will always be stated\nin this documentation but can also be queried from the MediaPlayerModule instance itself using `}<inlineCode parentName=\"p\">{`MediaPlayerModule.getSupportedPlayerViewType()`}</inlineCode>{`.\nMake sure to always use the appropriate `}<inlineCode parentName=\"p\">{`PlayerView`}</inlineCode>{`.`}</p>\n    <p>{`Creation of the plugin is the user’s responsibility, use the constructor of the desired plugin, provide appropriate parameters and set listeners.\nWhen a plugin is passed to a UstreamPlayer instance it will be retained across configuration changes, however the listeners the user provided are not subject\nto the usual `}<inlineCode parentName=\"p\">{`UstreamPlayer.attach()`}</inlineCode>{` / `}<inlineCode parentName=\"p\">{`UstreamPlayer.detach()`}</inlineCode>{` working. The user needs to manually set and remove those listeners.\nThe current `}<inlineCode parentName=\"p\">{`MediaPlayerModule`}</inlineCode>{` in use can be retrieved from the player instance using `}<inlineCode parentName=\"p\">{`UstreamPlayer.getMediaPlayerPlugin()`}</inlineCode>{` which returns\na `}<inlineCode parentName=\"p\">{`MediaPlayerModule`}</inlineCode>{` that will be cast to the appropriate class that was set during `}<inlineCode parentName=\"p\">{`initWithContent`}</inlineCode>{`. The user must know which MediaPlayerModule was\nset during init.`}</p>\n    <p>{`Please note that while a `}<inlineCode parentName=\"p\">{`MediaPlayerPlugin`}</inlineCode>{` provided through `}<inlineCode parentName=\"p\">{`UstreamPlayer.initWithContent`}</inlineCode>{` is retained across configuration changes,\nthe plugin itself might NOT support configuration changes at all due to plugin specific reasons. This will always be stated in the plugin’s documentation\nunder the `}<strong parentName=\"p\">{`Plugin limitations`}</strong>{` section.`}</p>\n    <h2>{`Ads Plugin`}</h2>\n    <p>{`IBM Player SDK version 1.1.0 introduced `}<strong parentName=\"p\">{`Ads Plugin`}</strong>{` (called `}<inlineCode parentName=\"p\">{`AdsMediaPlayerModuleAndroid`}</inlineCode>{`) which can be used to provide ads for the audience using the developer’s\n`}<em parentName=\"p\">{`Double Click for Publishers`}</em>{` account.`}</p>\n    <p>{`Supported features:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Pre-roll video ads`}</li>\n      <li parentName=\"ul\">{`Mid-roll video ads with multiple configurable scheduling via `}<inlineCode parentName=\"li\">{`AdScheduleRule`}</inlineCode>{`s`}</li>\n      <li parentName=\"ul\">{`Customizable ad parameters via key/value pairs`}</li>\n    </ul>\n    <p>{`Ads plugin needs to be instantiated and passed to the `}<inlineCode parentName=\"p\">{`UstreamPlayer`}</inlineCode>{` instance via `}<inlineCode parentName=\"p\">{`initWithContent(ContentDescriptor, MediaPlayerModule)`}</inlineCode>{`.\nUpon plugin creation the user can provide the following configuration data: `}<inlineCode parentName=\"p\">{`String dfpTagUrl`}</inlineCode>{`, `}<inlineCode parentName=\"p\">{`AdScheduleRule scheduleRule`}</inlineCode>{`,\nwhere `}<inlineCode parentName=\"p\">{`dfpTagUrl`}</inlineCode>{` points to the user’s `}<em parentName=\"p\">{`Double Click for Publishers`}</em>{` account and `}<inlineCode parentName=\"p\">{`adScheduleRule`}</inlineCode>{` is the class defining when to show ads.\nSee javadoc for details.`}</p>\n    <p>{`Additionally, any time after creation the user can set:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`an `}<inlineCode parentName=\"li\">{`AdStateListener`}</inlineCode>{` using `}<inlineCode parentName=\"li\">{`AdsMediaPlayerModuleAndroid.setAdStateListener(AdStateListener)`}</inlineCode>{` which notifies the user when an ad is being displayed.`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`AdData`}</inlineCode>{` which is targeting metadata for `}<em parentName=\"li\">{`DFP`}</em>{`. Feel free to use your own meta and/or meta provided by `}<inlineCode parentName=\"li\">{`MetaDataListener.onMetaData(MetaData)`}</inlineCode>{`.`}</li>\n    </ul>\n    <h3>{`Example usage`}</h3>\n    <p>{`Add the Ads Plugin to your build use same local m2 repository in project root folder and add these lines to your gradle file (Google IMA SDK is a dependency of the Ads Plugin):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-gradle\"\n      }}>{`implementation 'tv.ustream.player:ibm-player-sdk-android-plugin-ads-external:1.4.0@aar'\nimplementation 'com.google.ads.interactivemedia.v3:interactivemedia:3.11.3'\nimplementation 'com.google.android.gms:play-services-ads-identifier:17.0.0'\nimplementation 'androidx.browser:browser:1.0.0'\n`}</code></pre>\n    <p>{`In `}<inlineCode parentName=\"p\">{`AndroidManifest.xml`}</inlineCode>{` set configChanges settings in the player activity as:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<activity\n        android:name=\"com.my.company.PlayerActivity\"\n        android:configChanges=\"orientation|screenSize|keyboardHidden\"\n        android:label=\"@string/app_name\" />\n`}</code></pre>\n    <p>{`Create a UstreamPlayer as usual, but provide an `}<inlineCode parentName=\"p\">{`AdsMediaPlayerModule`}</inlineCode>{` at init:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`ustreamPlayer = ustreamPlayerFactory.createUstreamPlayer(playerId);\nif (!ustreamPlayer.isInitialized()) {\n    final AdScheduleRule scheduleRule = new FixedIntervalRule(true, 60000); // Schedules a pre-roll and inserts mid-rolls after 60 seconds of playback time\n    ustreamPlayer.initWithContent(contentDescriptor, new AdsMediaPlayerModuleAndroid(/* AdsStateListener */this, DFP_TAG_URL, scheduleRule));\n}\n`}</code></pre>\n    <p>{`In your application’s layout file use `}<inlineCode parentName=\"p\">{`tv.ustream.player.android.plugin.ads.AdsPlayerView`}</inlineCode>{` (instead of regular `}<inlineCode parentName=\"p\">{`tv.ustream.player.android.PlayerView`}</inlineCode>{`).`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"\n    android:background=\"@android:color/black\">\n\n    <tv.ustream.player.android.plugin.ads.AdsPlayerView\n        android:id=\"@+id/playerview\"\n        android:layout_height=\"match_parent\"\n        android:layout_width=\"match_parent\"\n        android:layout_gravity=\"center\"/>\n\n</FrameLayout>\n`}</code></pre>\n    <p>{`Retrieve the plugin after init:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`AdsMediaPlayerModuleAndroid mediaPlayerPlugin = ustreamPlayer.getMediaPlayerPlugin();\n`}</code></pre>\n    <p>{`Set an `}<inlineCode parentName=\"p\">{`AdsStateListener`}</inlineCode>{` on the plugin:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`mediaPlayerPlugin.setAdStateListener(new AdStateListener() {\n    @Override\n    public void adStarted() {\n        // Customize UI elements during ad playback, e.g: hide seekbar\n        seekBar.setVisibility(View.INVISIBLE);\n        muteToggleButton.setVisibility(View.INVISIBLE);\n        fullScreenToggleButton.setVisibility(View.INVISIBLE);\n    }\n\n    @Override\n    public void adFinished() {\n        // Restore UI elements after ad playback\n        seekBar.setVisibility(View.VISIBLE);\n        muteToggleButton.setVisibility(View.VISIBLE);\n        fullScreenToggleButton.setVisibility(View.VISIBLE);\n    }\n});\n`}</code></pre>\n    <p>{`Set meta for `}<em parentName=\"p\">{`DFP`}</em>{` using an `}<inlineCode parentName=\"p\">{`AdData`}</inlineCode>{` object:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-java\"\n      }}>{`List<String> adKeywords = Arrays.asList(\"testKeyword1\", \"testKeyword2\");\nMap<String, String> adExtras = new HashMap<>();\nadExtras.put(\"adExtraKey1\", \"adExtraValue1\");\nadExtras.put(\"adExtraKey2\", \"adExtraValue2\");\nAdData adData = new AdData(\"TestTitle\", adKeywords, adExtras);\nmediaPlayerPlugin.setAdData(adData);\n`}</code></pre>\n    <p>{`Everything else works just like it did before, no other code modification is required.`}</p>\n    <h3>{`Plugin limitations`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Ads Plugin does not support configuration changes, use `}<inlineCode parentName=\"li\">{`android:configChanges=\"orientation|screenSize|keyboardHidden\"`}</inlineCode>{` in your player activity.\nThis limitations is imposed by Google IMA SDK on which we depend to show ads.`}</li>\n      <li parentName=\"ul\">{`Ads Plugin uses it’s own PlayerView: `}<inlineCode parentName=\"li\">{`tv.ustream.player.android.plugin.ads.AdsPlayerView`}</inlineCode></li>\n      <li parentName=\"ul\">{`Seeking while an ad is playing will seek the original content, as ad seeking is not possible`}</li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}