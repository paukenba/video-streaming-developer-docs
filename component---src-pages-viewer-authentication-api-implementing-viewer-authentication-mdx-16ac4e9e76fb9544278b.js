(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{Yooe:function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return l})),n.d(t,"default",(function(){return u}));n("91GP"),n("rGqo"),n("yt8O"),n("Btvt"),n("RW0V"),n("q1tI");var a=n("7ljp"),r=n("XbGe");n("qKvR");function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var l={},c=function(e){return function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),Object(a.b)("div",t)}},i=c("Title"),o=c("InlineNotification"),p={_frontmatter:l},s=r.a;function u(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,a,r={},b=Object.keys(e);for(a=0;a<b.length;a++)n=b[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,["components"]);return Object(a.b)(s,b({},p,n,{components:t,mdxType:"MDXLayout"}),Object(a.b)("h2",null,"Channel level"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"PUT https://api.video.ibm.com/channels/CHANNEL_ID/locks/hash/advanced.json\n")),Object(a.b)(i,{mdxType:"Title"},"Parameters"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"PARAMETER"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"TYPE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"IMPORTANCE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"url")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"string"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"REQUIRED"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"URL of the authentication flow entry point")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"secret")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"string"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"REQUIRED"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Secret key")))),Object(a.b)(i,{mdxType:"Title"},"Response"),Object(a.b)("p",null,"HTTP response codes returned when the action is successful:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),"201 Created"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Viewer authentication has been set up on the channel with the new hash.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),"204 No Content"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Viewer authentication has been set up on the channel by updating the existing hash with the new one.")))),Object(a.b)("p",null,"Specific error codes returned when the action failed:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"ERROR VALUE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"CODE DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"invalid_request")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"400 Bad Request"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"One or more required parameters are missing (secret, url).")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"invalid_type")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"400 Bad Request"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The URL is invalid.")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"lack_of_ownership")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"403 Forbidden"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The api user is not allowed to manage the given channel")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"not_found")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"404 Not found"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Channel not found")))),Object(a.b)("h2",null,"Video level"),Object(a.b)("p",null,"By default videos inherit the authentication settings from channels but it can be overridden on a video by video basis."),Object(a.b)("h3",null,"Set up viewer authentication for a video"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"PUT https://api.video.ibm.com/videos/VIDEO_ID/locks/hash.json\n")),Object(a.b)(i,{mdxType:"Title"},"Parameters"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"PARAMETER"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"TYPE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"IMPORTANCE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"url")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"string"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"REQUIRED"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"URL of the authentication flow entry point")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"secret")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"string"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"REQUIRED"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Secret key")))),Object(a.b)(i,{mdxType:"Title"},"Response"),Object(a.b)("p",null,"HTTP response code returned when the action is successful:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),"204 No content"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Viewer authentication has been set up on the video")))),Object(a.b)("h2",null,"Implementing the authentication response"),Object(a.b)("p",null,"If the authentication was successful, your service must pass an authentication response to the player. The authentication response must be a JSON encoded array which contains the following:"),Object(a.b)("ul",null,Object(a.b)("li",{parentName:"ul"},"list of parameters that have been hashed"),Object(a.b)("li",{parentName:"ul"},"the MD5 hash of the string that has been created by concatenating the parameters and the shared secret key with pipe ”|” characters")),Object(a.b)("p",null,"Example script in PHP for creating the authentication response when the authentication was successful"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{className:"language-js"}),'// We create the array of parameters.\n// The parameters can be anything.\n$userData = [\n    "username" => $_GET["user"],\n    "someString" => "someValue"\n];\n\n// We create the hash by hashing\n// the parameters array contents and\n// the secret key\n// concatenated together with a pipe character.\n$hash = md5(implode(\'|\', $userData) . \'|\' . $SHARED_SECRET_KEY);\n\n// We put the array of parameters and the hash into the response.\n$response = array_chunk(\n    array_merge($userData, ["hash" => $hash]),\n    1,\n    true\n);\n\n// We encode the response into JSON format.\n$json = json_encode($response);\n')),Object(a.b)(o,{kind:"info",mdxType:"InlineNotification"},"The order of the parameters should match their order in the array when creating the hash."),Object(a.b)("p",null,"To pass the response to the player your service must redirect the page to the IBM Video Streaming return URL with passing the response in JSON format as a get parameter. You can test the API response at the ",Object(a.b)("a",b({parentName:"p"},{href:"/video-streaming-developer-docs/viewer-authentication-api-hash-authentication-test"}),"Hash Authentication Test")," page."),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"https://video.ibm.com/embed/hashlock/pass?hash=RESPONSE_IN_JSON_FORMAT\n")),Object(a.b)("h2",null,"Managing viewer authentication settings"),Object(a.b)("h3",null,"Getting channel viewer authentication settings"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"GET https://api.video.ibm.com/channels/CHANNEL_ID/locks/hash.json\n")),Object(a.b)("h4",null,"Parameters"),Object(a.b)("p",null,"This request has no parameters."),Object(a.b)("h4",null,"Response"),Object(a.b)("p",null,"Upon success, key-value pairs are returned under a “hashlock” key."),Object(a.b)("p",null,"Example:"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{className:"language-json"}),'{\n  "hashlock": {\n    "type": "advanced",\n    "url": "https://yourdomain.com/auth/123",\n    "message": null,\n    "button_caption": null,\n    "popup_width": "0",\n    "popup_height": "0"\n  }\n}\n')),Object(a.b)("p",null,"Specific error codes returned when the action failed:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"ERROR VALUE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"lack_of_ownership")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"403 Forbidden"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The API user is not allowed to manage the given channel")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"not_found")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"404 Not found"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Channel not found")))),Object(a.b)("h3",null,"Removing channel viewer authentication"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"DELETE  https://api.video.ibm.com/channels/CHANNEL_ID/locks/hash.json\n")),Object(a.b)("h4",null,"Parameters"),Object(a.b)("p",null,"This request has no parameters."),Object(a.b)("h4",null,"Response"),Object(a.b)("p",null,"Upon success the 200 OK HTTP response code is returned."),Object(a.b)("p",null,"Specific error codes returned when the action failed:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"ERROR VALUE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"lack_of_ownership")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"403 Forbidden"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The api user is not allowed to manage the given channel")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"not_found")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"404 Not found"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Channel not found")))),Object(a.b)("h3",null,"Getting video viewer authentication settings"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"GET https://api.video.ibm.com/videos/VIDEO_ID/locks/hash.json\n")),Object(a.b)("h4",null,"Parameters"),Object(a.b)("p",null,"This request has no parameters."),Object(a.b)("h4",null,"Response"),Object(a.b)("p",null,"Upon success, key-value pairs are returned under a “hashlock” key."),Object(a.b)(i,{mdxType:"Title"},"Example"),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{className:"language-json"}),'{\n  "hashlock": {\n    "url": "https://auth.yourdomain.com/video-authentication",\n    "secret": "TOP_SECRET_KEY"\n  }\n}\n')),Object(a.b)("p",null,"Specific error codes returned when the action failed:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"ERROR VALUE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"lack_of_ownership")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"403 Forbidden"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The api user is not allowed to manage the given channel")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"not_found")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"404 Not found"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Video or specific authentication settings not found")))),Object(a.b)("h3",null,"Removing specific video viewer authentication settings"),Object(a.b)("p",null,"If you remove specific settings then video will inherit the authentication settings from the channel."),Object(a.b)("pre",null,Object(a.b)("code",b({parentName:"pre"},{}),"DELETE  https://api.video.ibm.com/videos/VIDEO_ID/locks/hash.json\n")),Object(a.b)("h4",null,"Parameters"),Object(a.b)("p",null,"This request has no parameters."),Object(a.b)("h4",null,"Response"),Object(a.b)("p",null,"Upon success the 204 No Content HTTP response code is returned."),Object(a.b)("p",null,"Specific error codes returned when the action failed:"),Object(a.b)("table",null,Object(a.b)("thead",{parentName:"table"},Object(a.b)("tr",{parentName:"thead"},Object(a.b)("th",b({parentName:"tr"},{align:null}),"ERROR VALUE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"HTTP RESPONSE CODE"),Object(a.b)("th",b({parentName:"tr"},{align:null}),"DESCRIPTION"))),Object(a.b)("tbody",{parentName:"table"},Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"lack_of_ownership")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"403 Forbidden"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"The api user is not allowed to manage the given channel")),Object(a.b)("tr",{parentName:"tbody"},Object(a.b)("td",b({parentName:"tr"},{align:null}),Object(a.b)("inlineCode",{parentName:"td"},"not_found")),Object(a.b)("td",b({parentName:"tr"},{align:null}),"404 Not found"),Object(a.b)("td",b({parentName:"tr"},{align:null}),"Video or specific authentication settings not foun")))))}u.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-viewer-authentication-api-implementing-viewer-authentication-mdx-16ac4e9e76fb9544278b.js.map